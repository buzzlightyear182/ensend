<%= form_for([:admin, @product], html: {:class => "form-horizontal"}) do |f| %>
  <% if @product.errors.any? %>
    <div class="alert alert-danger alert-dismissible" role="alert" id="error_explanation">
    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <h2><%= pluralize(@product.errors.count, "error") %> prohibited this product from being saved:</h2>

      <ul>
      <% @product.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

   <div class="form-group">
    <%= f.label :title, :class => "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.text_field :title, :class => "form-control" %>
    </div>
  </div>

   <div class="form-group">
    <%= f.label :subtitle, :class => "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.text_field :subtitle, :class => "form-control" %>
    </div>
  </div>

   <div class="form-group">
    <%= f.label :short_description, :class => "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.text_area :short_description, :class => "form-control", :rows => 2 %>
    </div>
  </div>

  <div class="form-group">
    <%= f.label :content, :class => "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.text_area :content, :class => "form-control", :rows => 5 %>
    </div>
  </div>

  <div class="form-group">
    <%= f.label :logo, :class => "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.file_field :logo %>
      <p class="help-block">Ideal resolution: 300x300</p>
    </div>
  </div>

  <div class="form-group">
    <%= f.label :screenshot, :class => "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.file_field :screenshot %>
      <p class="help-block">Ideal resolution: 656x369</p>
    </div>
  </div>

  <div class="form-group">
    <%= f.label :apply_link, :class => "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.text_field :apply_link, :class => "form-control" %>
    </div>
  </div>

  <div class="form-group">
    <%= f.label :visit_link, :class => "col-sm-2 control-label" %>
    <div class="col-sm-10">
      <%= f.text_field :visit_link, :class => "form-control" %>
    </div>
  </div>

   <div class="form-group">
    <div class="col-sm-offset-2">
      <%= f.check_box :with_affiliate? %>
      <%= f.label :with_affiliate? %>
    </div>
  </div>

  <div class="form-group" id="tag_selects">
    <label class = "col-sm-2 control-label">Choose tags</label>
    <div class="col-sm-10">
    <%= hidden_field_tag "product[tags_ids][]", nil %>
      <% categories.each do |category|  %>
        <div class="col-sm-4">
        <h4><%= category.name  %></h4>
          <% category.tags.each do |tag| %>
          <div class="col-sm-12">
            <%= check_box_tag "product[tag_ids][]", tag.id, @product.tag_ids.include?(tag.id), id: dom_id(tag) %>
            <%= label_tag dom_id(tag), tag.name  %>
          </div>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>

  <div class="form-group" id="commission_type_selects">
    <label class = "col-sm-2 control-label">Choose commission type:</label>
    <div class="col-sm-10">
    <%= hidden_field_tag "product[commission_types_ids][]", nil %>
      <% commission_types.each do |commission|  %>
        <div class="col-sm-4">
          <%= check_box_tag "product[commission_type_ids][]", commission.id, @product.commission_type_ids.include?(commission.id), id: dom_id(commission) %>
            <%= label_tag dom_id(commission), commission.name  %>
        </div>
      <% end %>
    </div>
  </div>

  <div class="form-group">
    <%= f.submit :class => "btn btn-primary" %>
  </div>
<% end %>
